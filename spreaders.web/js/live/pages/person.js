spreaders.pages.person=function(){var b=function(a,b,d,e){var c=this;this.pageContext=a;this.storage=b;this.urlService=d;this.synchroniser=e;this.person;this.name=document.getElementsByName("name")[0];this.colour=document.getElementsByName("colour")[0];this.updateButton=document.getElementsByClassName("submit")[0];this.updateButton.addEventListener("click",this.processUpdateButtonClick.bind(this));a=this.pageContext.getCurrentPerson();this.storage.getPerson(a).then(function(a){c.person=a;c.populateForm()});
this.synchroniser.startServiceWorker()};b.prototype.populateForm=function(){this.name.value=this.person.name;this.colour.value=this.person.colour};b.prototype.processUpdateButtonClick=function(){var a=this;this.person.name=this.name.value;this.person.colour=this.colour.value;this.person.updatedOn=this.storage.getUtcUnixTimeStamp();this.storage.updatePerson(this.person,!0).then(function(){a.synchroniser.syncWithServer();window.location.href=a.urlService.getPeoplePage(a.pageContext.getCurrentGroupId())})};
return b}();var storage=new spreaders.storage;storage.connect().then(function(b){b=new spreaders.urlService;var a=new spreaders.pageContext(b),c=new spreaders.apiService;c=new spreaders.sync.synchroniser(storage,c);new spreaders.pages.person(a,storage,b,c)});
