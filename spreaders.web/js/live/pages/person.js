spreaders.pages.person=function(){var a=function(c,a,d,e){var b=this;this.pageContext=c;this.storage=a;this.urlService=d;this.synchroniser=e;this.person;this.name=document.getElementsByName("name")[0];this.colour=document.getElementsByName("colour")[0];this.updateButton=document.getElementsByClassName("submit")[0];this.populateBackButton();this.updateButton.addEventListener("click",this.processUpdateButtonClick.bind(this));c=this.pageContext.getCurrentPerson();this.storage.getPerson(c).then(function(a){b.person=
a;b.populateForm()});this.synchroniser.startServiceWorker()};a.prototype.populateBackButton=function(){document.getElementsByClassName("backButton")[0].href=this.urlService.getPeoplePage(this.pageContext.getCurrentGroupId())};a.prototype.populateForm=function(){this.name.value=this.person.name;this.colour.value=this.person.colour};a.prototype.processUpdateButtonClick=function(){var a=this;this.person.name=this.name.value;this.person.colour=this.colour.value;this.person.updatedOn=this.storage.getUtcUnixTimeStamp();
this.storage.updatePerson(this.person,!0).then(function(){a.synchroniser.syncWithServer();window.location.href=a.urlService.getPeoplePage(a.pageContext.getCurrentGroupId())})};return a}();var storage=new spreaders.storage;storage.connect().then(function(a){a=new spreaders.urlService;var c=new spreaders.pageContext(a),b=new spreaders.apiService;b=new spreaders.sync.synchroniser(storage,b);new spreaders.pages.person(c,storage,a,b)});
